---
import Phone from "./icons/phone.astro";

---

<section class="bg-white dark:bg-gray-900 rounded-2xl lg:px-8  mx-4">
  <div class="py-8 lg:py-16 px-4 mx-auto max-w-screen-md">
      <h2 class="mb-4 text-4xl tracking-tight font-extrabold text-center  text-amarillo-texto font-ibm">Contáctame</h2>
      <div>
        <p class="mb-8 lg:mb-16 font-light text-center w-full text-gray-500 dark:text-gray-400 sm:text-xl font-ibm">
          Cualquier duda que tengas puedes enviarme un mensaje, te contestaré a la brevedad
          <span class="inline-block mb-1 align-middle">
            <Phone class="w-[20px] sm:w-[24px] text-white animate-vibrate-pause" />
          </span>.
        </p>
      </div>
      
      
     <form id="contact-form" class="space-y-8 relative">
  <!-- Mensaje de estado (oculto al inicio) -->
  <div id="form-status" class="hidden text-center p-3 rounded-lg font-medium"></div>

  <div>
    <label for="email" class="block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300 font-ibm">Email</label>
    <input type="email" id="email" name="email" required
      class="shadow-sm bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg 
             focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 
             dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white 
             dark:focus:ring-primary-500 dark:focus:border-primary-500 dark:shadow-sm-light" 
      placeholder="John@example.com">
  </div>

  <div>
    <label for="subject" class="block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300 font-ibm">Nombre</label>
    <input type="text" id="subject" name="subject" required
      class="block p-3 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 
             shadow-sm focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 
             dark:border-gray-600 dark:placeholder-gray-400 dark:text-white 
             dark:focus:ring-primary-500 dark:focus:border-primary-500 dark:shadow-sm-light" 
      placeholder="John">
  </div>

  <div class="sm:col-span-2">
    <label for="message" class="block mb-2 text-sm font-medium text-gray-900 dark:text-gray-400 font-ibm">Mensaje</label>
    <textarea id="message" name="message" rows="4" required
      class="block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg shadow-sm 
             border border-gray-300 focus:ring-primary-500 focus:border-primary-500 
             dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white 
             dark:focus:ring-primary-500 dark:focus:border-primary-500"></textarea>
  </div>

  <div class="flex justify-center">
    <button type="submit"
      class="py-3 px-10 sm:text-lg font-medium text-center hover:bg-amarillo-texto hover:text-black 
             bg-primary-700 sm:w-fit hover:bg-primary-800 focus:ring-4 focus:outline-none 
             focus:ring-primary-300 dark:bg-primary-600 dark:hover:bg-primary-700 
             dark:focus:ring-primary-800 rounded-md border border-white/10 
             flex justify-center items-center gap-x-2 bg-white/20 transition text-white">
      Enviar
    </button>
  </div>
</form>

<script>
  const form = document.getElementById("contact-form");
  const statusDiv = document.getElementById("form-status");

  form.addEventListener("submit", async (e) => {
    e.preventDefault();

    const formData = new FormData(form);

    try {
      const response = await fetch("https://formspree.io/f/xldpdzzw", {
        method: "POST",
        body: formData,
        headers: { "Accept": "application/json" }
      });

      if (response.ok) {
        statusDiv.textContent = "✅ Mensaje enviado con éxito";
        statusDiv.className = "block text-green-800 bg-green-100 border border-green-300 rounded-lg p-3 mb-4";
        form.reset();
      } else {
        statusDiv.textContent = "❌ Error al enviar el mensaje. Intenta nuevamente.";
        statusDiv.className = "block text-red-800 bg-red-100 border border-red-300 rounded-lg p-3 mb-4";
      }
    } catch (error) {
      statusDiv.textContent = "⚠️ Hubo un problema con la conexión.";
      statusDiv.className = "block text-yellow-800 bg-yellow-100 border border-yellow-300 rounded-lg p-3 mb-4";
    }
  });
</script>


  </div>
</section>


  





  
  